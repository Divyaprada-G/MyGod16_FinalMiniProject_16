### üß≠ Overall Architecture (from the document)

*Flow:*
User Input ‚Üí Map Interface ‚Üí GEE Handler ‚Üí Preprocessing ‚Üí Model Predictor ‚Üí Map Generator ‚Üí Dashboard Visualization

---

## 1Ô∏è‚É£ Dataset Handling

*Files involved:*

* gee_handler.py

  * Fetches Sentinel-2 satellite imagery using *Google Earth Engine (GEE)*.
  * Performs *NDVI extraction* (Normalized Difference Vegetation Index), the main dataset feature.
  * Handles cloud masking, compositing, and seasonal filtering (so this includes part of preprocessing).
* *Training Data:* Public GEE datasets + labeled crop polygons (mentioned in doc).

*Summary:*

> The dataset isn‚Äôt stored locally; it‚Äôs fetched dynamically from GEE based on region selection.
> For offline demos, pre-downloaded sample data may exist in a data/ folder.

---

## 2Ô∏è‚É£ Preprocessing

*Main file:* gee_handler.py
*Functions likely include:*

* Cloud masking
* Percentile compositing
* NDVI time-series extraction
* Temporal filtering for seasonal data
* Feature extraction (NDVI median, percentiles, temporal texture)

*Purpose:* Clean and prepare satellite data before feeding it into the model.

---

## 3Ô∏è‚É£ Model Training

*Main file:* (done previously, not part of the web app runtime)

* Likely train_model.py or within a Jupyter notebook not shown in deployment repo.
* The trained model is saved as crop_classifier.pkl.

*Details from doc:*

* Algorithm: *Scikit-learn Random Forest*
* Features: NDVI-based statistics
* Classes:

  * Paddy/Rice (Green)
  * Millet/Pulses (Yellow)
  * Cash Crops (Brown)
  * Fallow/Barren (Gray)
* Target Accuracy: >90%

*Purpose:* Train the Random Forest classifier once; the .pkl model is then used for predictions.

---

## 4Ô∏è‚É£ Prediction (Inference)

*Main file:* model_predictor.py

* Loads the trained model (crop_classifier.pkl).
* Runs model.predict() or model.predict_proba() on the processed NDVI features.
* Generates labeled crop maps for the region.

*Connected through Flask API:*

* Endpoint /api/analyze triggers this module after preprocessing.
* Endpoint /api/results returns predictions to frontend.

---

## 5Ô∏è‚É£ Visualization and Output

*Main file:* map_generator.py

* Converts predictions into *color-coded map overlays*.
* Uses *Leaflet / Chart.js* for interactive display.
* Handles CSV/PDF export (/api/download endpoint).

---

### üìÅ Summary Table of Where Each Stage Happens

| Stage                      | File                         | Description                            |
| -------------------------- | ---------------------------- | -------------------------------------- |
| *Dataset Fetching*       | gee_handler.py             | Gets satellite NDVI data from GEE      |
| *Preprocessing*          | gee_handler.py             | Cloud masking, compositing, filtering  |
| *Model Training*         | train_model.py (offline) | Builds and saves crop_classifier.pkl |
| *Model Prediction*       | model_predictor.py         | Loads model, predicts crop type        |
| *Visualization / Output* | map_generator.py, app.py | Generates maps, charts, reports        |